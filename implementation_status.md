# 実装状況

## ✅ 完了した機能

### 基本機能
- [x] **画像の入出力**: PNG、JPG、WEBP形式の画像をアップロードし、PNG形式で処理済み画像を出力可能。
- [x] **ウォーターマークの適用**: 「No AI」や「All Rights Reserved」などの可視型ウォーターマークを透過率調整や白黒反転オプション付きで適用可能。
- [x] **リサイズ機能**: 画像を小、中、デフォルトのサイズにリサイズし、アスペクト比を維持。

### 画像の保存
- [x] インプット、またはドラッグ＆ドロップされた画像のファイル名を一時保持し、#beforeImage の下にある .file-name の内容に置きける。これを元に、maliced- のプレフィックスを付与した処理結果ファイル名として使用する。

### UIの改善
- [x] **ドラッグ＆ドロップ対応**: 画像をアプリケーションにドラッグ＆ドロップして処理可能。
- [x] **モーダル通知**: エラーや処理完了時にモーダル通知を表示。
- [x] **出力フォルダへのアクセス**: 処理済み画像をクリックすると出力フォルダを開く機能を追加。

### バックエンドの改善
- [x] **Python統合**: 埋め込みPython環境を使用し、ユーザーのシステムに依存しない動作を実現。
- [x] **Pythonの自動セットアップ**: 初回起動時にPython環境を自動的にダウンロード・セットアップし、Pillowなどの必要なライブラリをインストール。
- [x] **エラーハンドリング**: Pythonスクリプトの実行やファイル操作におけるエラーハンドリングを改善。

## ⏳ 未完了の機能

### ノイズ付与
- [ ] **不可視ノイズ**: AI学習から画像を保護するためのノイズ付与技術（例: DCTノイズ、ベイヤーパターン擾乱、色相微調整）の実装は未完了。

### メタデータ操作
- [ ] **EXIF/IPTC/XMPメタデータ**: メタデータの削除やフェイクメタデータの追加機能は未実装。

## 🆕 最近の更新

### 2025年4月27日
- 処理済み画像をクリックすると出力フォルダを開く機能を追加。
- Pythonセットアップを強化し、必要なライブラリが自動的にインストールされるように改善。
- README.mdを更新し、Python自動セットアッププロセスを記載。
- オリジナルのファイル名を保持し、処理後のファイル名に「maliced-」プレフィックスを付ける機能を実装。「temp_input.png」ではなく元のファイル名が表示・保存されるように修正。
- マリス・ロゴを画像の四隅に配置する機能を追加。設定モーダルからロゴの位置（ランダム・左上・右上・左下・右下）を選択可能に。
- ロゴサイズを画像の短辺の20%に自動調整する機能を実装し、様々なサイズの画像でもバランスの良いロゴ配置を実現。
- アプリケーションのパッケージング設定を追加。electron-builderを使用した配布用ビルド機能を実装予定。

## 📦 ビルド・配布計画（未実装）
- [ ] **Windows向けインストーラー**: electron-builderを使用したNSISインストーラーの作成
- [ ] **Mac向けDMGパッケージ**: macOS用の配布パッケージの作成
- [ ] **Linux向けAppImage**: Linux用の配布パッケージの作成
- [ ] **自動更新機能**: 新バージョン検出・ダウンロード機能の実装
- [ ] **クロスプラットフォーム対応の強化**: 各OS固有の機能・パスの適切な処理

## 💡 備考
- ウォーターマークとリサイズ機能は完全に動作します。
- 今後の更新では、ノイズ付与とメタデータ操作機能の実装に注力します。